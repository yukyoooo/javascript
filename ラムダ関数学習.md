# ラムダ関数
- 関数自体を入力として関数に渡し、出力として返すことが出来るデータ
- 関数リテラル
    - その場で作成される関数
    - 匿名関数(anonymous function)
    - 無名関数
```js
console.log(function(){ return "A new world"}());
console.log(function(){ return 4 + 5}()); 

let p = 40;
console.log(function(){ return p + 10}());//50
console.log(function(){ return "P is " + p}() + " ......"); // P is 40.....

console.log("squaring..." + function(x){return x*x}(4)); //squaring...16

console.log("looping..." + function(x){
   let sheeps = "";
   for(let i = 1; i <= x; i++) sheeps += i + "sheep~";
   return sheeps;
}(5));  //looping...1sheep~2sheep~3sheep~4sheep~5sheep~

// また、JavaScriptのarrow構文を使用してラムダ関数を作成することもできます。
// ((inputs)=>output)
console.log((()=>4+4)()); //8

// 1つの入力 (input=>output)
console.log((x=>x+3)(4)); //7

// 複数の入力
console.log(((x,y)=>x+y)(10,15)); //25

// 複数の入力、複数の行
console.log(((a,b)=>{
   a = Math.pow(a,2);
   b = Math.pow(b,2);
   return Math.sqrt(a+b);
})(3,4)); //5
```

## 高階関数
- 関数を入力として受け取り、関数を出力として返す関数は高階関数と呼ぶ
- ラムダ式で作成した呼出可能オブジェクトは、データとして利用することができる
    - 関数の引数に関数を渡す
- 第一級オブジェクト
    - 変数に格納され、入力として渡され、出力として返されるすべてのデータ型
```js
function functionInputTest(f){
   return f() + ".... called from another function!"
}
console.log(functionInputTest(function(){return "hello world"}))

function fSquaredX(f, x){
   return f(x*x);
}
// f(a^2) = a^2 + 30;
console.log(fSquaredX(function(a){ return a + 30}, 5)); // 25 + 30 = 55

let callable1 = function(p){return "p is " + p};
console.log(fSquaredX(callable1,10)); //p is 100
console.log(fSquaredX(callable1,8)); //p is 64

function summation(g, a, b){
   if(b < a) return 0;
   return g(b) + summation(g, a, b-1);
}
// 10までの総和
// 1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9 + 10 = 55
let identity = function(i){return i};
console.log(summation(identity, 1, 10));
// 10 * 100 の計算
console.log(summation(function(){return 10}, 1, 100)); // 100 * 10

function pPi(g,a,b){
   if(b < a) return 1;
   return g(b) * pPi(g, a, b-1);
}
// 10の階乗(10!)
console.log(pPi(identity, 1, 10)); //3,628,800
// 5^10 の計算
console.log(pPi(function(){return 5}, 1, 10));


function summation(g, a, b){
   if(b < a) return 0;
   return g(b) + summation(g, a, b-1);
}
//1から25までの2乗の総和
let identity = function(i){return i*i};
console.log(summation(identity, 1, 25));
//1から10までの3i*(i+3)の総和
let identity2 = function(i){return 3 * i * (i + 3)}
console.log(summation(identity2, 1, 10));
//1からmまでの2j*(j-1)の総和　m=20
let identity3 = function(j){return 2 * j * (j - 1)};
let m = 20;
console.log(summation(identity3, 1, m));

function pPi(g,a,b){
   if(b < a) return 1;
   return g(b) * pPi(g, a, b-1);
}
//1から6まで7-kの階乗
let identity4 = function(k){return  7 - k};
console.log(pPi(identity4, 1, 6)); 
//3から9までのi^2+3の階乗
let identity5 = function(i){return i * i + 3};
console.log(pPi(identity5, 3, 9));


function helloFunction(){
   return function(){return "hello world"};
}
// この関数は関数を返します。
console.log(helloFunction());
// 戻り値としてのこの関数を実行するか、保存することができます。
console.log(helloFunction()());
let outputF = helloFunction();
console.log("Running a function that was generated...." + outputF());

// 数値xを取り込み、その後xと入力を乗算する関数を返します。
function constantMultiplication(x){
   return function(y){return y*x};
}
let multiplyBy4 = constantMultiplication(4);
console.log(multiplyBy4(3)); //3*4 = 12
console.log(multiplyBy4(10)); //10*4 = 40
console.log(multiplyBy4(5)); //5*4 = 20
```

```js
function weightFormulaByPlanet(planet){

   // 利用可能な惑星を検索します。デフォルトは地球です。
   const planets = {
       "mercury": 3.7,
       "venus": 8.87,
       "earth": 9.807,
       "mars": 3.711,
       "jupiter": 24.79,
       "saturn": 10.44,
       "uranus": 8.87,
       "neptune": 11.15,
   };

   planet = planet.toLowerCase();
   let gravity = planets[planet] !== undefined ? planets[planet] : planets["earth"];
   return function(kgMass){ return kgMass * gravity};
}

// 質量kgを取り込み、地球上の重量をニュートンで返す関数を作成します。
let getWeightOnEarth = weightFormulaByPlanet("earth");
console.log(getWeightOnEarth(50)); //490.35 N
console.log(getWeightOnEarth(90)); //882.63 N

let getWeightOnJupiter = weightFormulaByPlanet("jupiter");
console.log(getWeightOnJupiter(50)); //1239.5 N
console.log(getWeightOnJupiter(90)); //2231.1 N

console.log(weightFormulaByPlanet("neptune")(50)); //557.5 N
```

